{% load static %}
<!DOCTYPE html>
<html>
<head>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    

    <link rel="stylesheet" href="{% static 'index.css' %}">
    <link rel="stylesheet" href="{% static 'update.css' %}">
    <link rel="stylesheet" href="{% static 'searchForm.css' %}">
    <link rel="icon" href="{% static 'Education-rafiki.png' %}">
    <script src="{% static 'update.js' %}"></script>
    <title>Student Affairs Project</title>
</head>
<body>
    <section class="Home" id="home">
        <nav>
            <h2>student <span class="ss">Affairs</span></h2>
            <ul>
                <li>
                    <a href="{% url 'index' %}" class="page1"><i class="ri-home-4-fill"></i>Home</a>
                </li>
                <li>
                    <a href="#home">about us</a>
                </li>
            </ul>
            <a href="#home" class="menu"><i class="ri-menu-line"></i></a>
        </nav>
        <h5 class="msg">Welcome to <span class="ss">Update page</span>, In this Page you can <span class="ss">Update Students Information</span> by searching using <span class="ss">ID</span></h5>

        <div class="search-form">
            <form id="searchForm" action="{% url 'search_student' %}" method="GET">
                {% csrf_token %}
        
                <input type="text" id="searchInput" name="id" placeholder="Enter ID" required>
                <button type="submit" class="search">Search</button>
                
            </form>
        </div>
        <img src="{% static 'icons/File searching-bro.png' %}" alt="" class="pic">
        <div id="studentInfoContainer">
            {% if student %}
                <div class="student-info">
                    <form method="POST" action="{% url 'update_student' student.id %}" id="updateStudentForm">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="name">Name:</label>
                            <input type="text" name="name" id="name" value="{{ student.name }}" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth:</label>
                            <input type="date" name="dob" id="dob" value="{{ student.date_of_birth|date:'Y-m-d' }}" class="form-control" placeholder="YYYY-MM-DD">
                        </div>
                        <div class="form-group">
                            <label for="gpa">GPA:</label>
                            <input type="number" name="gpa" id="gpa" value="{{ student.GPA }}" class="form-control" step="0.1" min="0" max="4">
                        </div>
                        <div class="form-group">
                            <label for="status">Status:</label>
                            <input type="text" name="status" id="status" value="{{ student.status }}" class="form-control" disabled>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender:</label>
                            <select name="gender" id="gender" class="form-control">
                                <option value="Male" {% if student.gender == 'Male' %}selected{% endif %}>Male</option>
                                <option value="Female" {% if student.gender == 'Female' %}selected{% endif %}>Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="level">Level:</label>
                                <select name="level" id="level" class="form-control">
                                    <option value="1" {% if student.level == '1' %}selected{% endif %}>1</option>
                                    <option value="2" {% if student.level == '2' %}selected{% endif %}>2</option>
                                    <option value="3" {% if student.level == '3' %}selected{% endif %}>3</option>
                                    <option value="4" {% if student.level == '4' %}selected{% endif %}>4</option>
                                </select>
                        </div>
                        <div class="form-group">
                            <label for="department">Department:</label>
                            <input type="text" name="department" id="department" value="{{ student.department }}" class="form-control" disabled>
                        </div>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </form>

                    <form id="deleteStudentForm" action="{% url 'delete_student' student.id %}" method="POST">
                        {% csrf_token %}
                        <button type="button" class="btn btn-danger" onclick="deleteStudent()">Delete</button>
                    </form>
                </div>
            {% endif %}
        </div>
    </section>

    <script>
        function deleteStudent() {
            if (confirm("Are you sure you want to delete this student?")) {
                document.getElementById("deleteStudentForm").submit();
            }
        }
    </script>
</body>
</html>